@{
  Layout = "_Layout";
}
@using Factory.Models;
@model Factory.Models.Machine
<div class="px-5 py-5 bg-light">
  @using (Html.BeginForm())
  {
    <div class="form-group px-5">
      <div class="row">
        <div class="col">
          @Html.TextBoxFor(model => model.MachineName, new {@class = "form-control", type="num", required = "required", placeholder="Machine Name"})
        </div>
        <div class="col">
          @Html.TextBoxFor(model => model.MachineMake, new {@class = "form-control",required = "required", placeholder="Machine Make"})
        </div>
        <div class="col">
          @Html.TextBoxFor(model => model.MachineModel, new {@class = "form-control",required = "required", placeholder="Machine Model"})
        </div>
      </div>
      <div class="row mt-3">
        <div class="col">
          @Html.TextBoxFor(model => model.ManufacturedYear, new {@class = "form-control", type="number", required = "required", min=1950, max=2022, placeholder="Manufacture Year"})
        </div>
        <div class="col">
          @Html.DropDownList("MachinePurpose", new List<SelectListItem>
        {
        new SelectListItem { Text = "What does this machine do", Selected=true, Disabled=true},
        new SelectListItem { Text = "Create", Value = "create"},
        new SelectListItem { Text = "Destroy", Value = "destroy"},
        new SelectListItem { Text = "Liquify", Value = "liquify"}
        }, new { @required = "required", @class="form-control"})
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6 col-lg-6 ">
          <label for="addEngineers" class="mt-3">Would you like to associate any engineers with this machine?</label>
          <select name="addEngineers" class="form-control" id="addEngineers">
            <option value="No">No</option>
            <option value="Yes">Yes</option>
          </select>
          <div class="row" id="addEngineerContainer" style="display:none;">
            <div class="col-7">
              <select id="listOfEngineers" class="form-control mt-3">
                @foreach (Engineer engineer in ViewBag.ListOfEngineers)
                {
                  <option value="engineer-@engineer.EngineerId">@engineer.Name</option>
                }
              </select>
            </div>
            <div class="col-5 pt-3 my-auto">
              <a class="btn btn-sm btn-dark px-2" id="addEngineerButton">Add</a>
              <a class="btn btn-sm btn-secondary px-2">Cancel</a>
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-6">
          <span id="selectedEngineers"></span>
        </div>
        <script>
          $("#addEngineers").change(function () {
            if ($("#addEngineers").val() === "Yes") {
              $("#addEngineerContainer").show();
            } else {
              $("#listOfEngineers").hide();
            }
          });
          $("#addEngineerButton").click(function () {
            let text = $("#listOfEngineers option:selected").text();
            $("#selectedEngineers").html($("#selectedEngineers").html() + text + " &nbsp; X <br>");
            $("#listOfEngineers option:selected").remove();
          @* $("#selectedEngineers").append($("#listOfEngineers")).find(":selected").text(); + "<br>"; *@
                });
        </script>
      </div>
    </div>
    <div class="form-group px-5 mt-3">
      <input type="submit" value="Add new machine" class="btn btn-dark btn-small" />
    </div>
  }
</div>
